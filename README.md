# MyClock

[English Version Below](#english-version)

<video src="video.mov" controls=""></video>

---

âš ï¸å£°æ˜Žï¼šæœ¬é¡¹ç›®å®Œå…¨ç”±Geminiåœ¨ 2h å†…æ­å»ºï¼ŒåŒ…æ‹¬ä»£ç ã€å¯¼å‡ºã€README å’Œ logoï¼Œåˆå§‹UIé£Žæ ¼å’ŒåŸºç¡€åŠŸèƒ½å‚è€ƒäº†å°çº¢ä¹¦åšä¸»â€œå¡å¤«å¡â€ï¼ŒIDä¸ºâ€œ174973146â€

## ðŸ‡¨ðŸ‡³ ä¸­æ–‡ç‰ˆæœ¬ 

**MyClock** æ˜¯ä¸€ä¸ªä¸“ä¸º macOS è®¾è®¡çš„æžç®€ç•ªèŒ„å·¥ä½œæ³•è®¡æ—¶å™¨ã€‚å®ƒé©»ç•™åœ¨ä½ çš„èœå•æ ä¸­ï¼Œæä¾›ä¸æ»‘çš„åŽŸç”Ÿä½“éªŒã€å¼ºå¤§çš„æ•°æ®ç»Ÿè®¡ä»¥åŠå®Œå…¨è‡ªå®šä¹‰çš„è®¾ç½®ï¼Œå¸®åŠ©ä½ ä¿æŒä¸“æ³¨å¹¶è¿½è¸ªå·¥ä½œæ•ˆçŽ‡ã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§

* **åŽŸç”Ÿä½“éªŒ**ï¼šåŸºäºŽ SwiftUI å’Œ AppKit å¼€å‘ï¼Œå®Œç¾Žå¥‘åˆ macOS è®¾è®¡è¯­è¨€ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼ã€‚
* **æ— å¹²æ‰°è®¾è®¡**ï¼š
  * **éšè— Dock å›¾æ ‡**ï¼šåº”ç”¨ä½œä¸ºâ€œä»£ç†ç¨‹åº (Agent)â€è¿è¡Œï¼Œä»…é©»ç•™åœ¨é¡¶éƒ¨èœå•æ ï¼Œä¸å ç”¨ Dock æ ç©ºé—´ï¼Œä¿æŒæ¡Œé¢æžè‡´æ•´æ´ã€‚
  * **çŠ¶æ€æ å¸¸é©»**ï¼šå›¾æ ‡ä¸Žå€’è®¡æ—¶ç›´æŽ¥æ˜¾ç¤ºåœ¨é¡¶éƒ¨ï¼Œéšæ—¶æŸ¥çœ‹å‰©ä½™æ—¶é—´ã€‚
* **æžç®€æŽ§åˆ¶**ï¼š
  * é€šè¿‡æ‹–åŠ¨æ»‘å—å¿«é€Ÿè®¾ç½®ä¸“æ³¨æ—¶é•¿ï¼ˆ1-90åˆ†é’Ÿï¼‰ã€‚
  * å¸¦æœ‰è§¦æ„Ÿåé¦ˆï¼ˆHapticsï¼‰çš„è°ƒèŠ‚ä½“éªŒã€‚
  * æ”¯æŒâ€œè·³è¿‡â€åŠŸèƒ½ï¼Œè‡ªåŠ¨è®°å½•å®žé™…ä¸“æ³¨æ—¶é•¿ã€‚
* **å¯è§†åŒ–ç»Ÿè®¡**ï¼š
  * **Day è§†å›¾**ï¼šè¯¦ç»†çš„æ—¶é—´è½´è®°å½•åˆ—è¡¨ã€‚
  * **Week è§†å›¾**ï¼šåŠ¨æ€æ¯”ä¾‹æŸ±çŠ¶å›¾ï¼Œä¸€ç›®äº†ç„¶ã€‚
  * **Month è§†å›¾**ï¼šGitHub é£Žæ ¼çš„çƒ­åŠ›å›¾ï¼ˆHeatmapï¼‰ï¼Œæ”¯æŒç‚¹å‡»æ—¥æœŸæŸ¥çœ‹åŽ†å²è¯¦æƒ…ã€‚
  * **æ—¥åŽ†å¯¼èˆª**ï¼šæ”¯æŒå·¦å³åˆ‡æ¢æ—¥æœŸï¼Œæˆ–é€šè¿‡æ—¥åŽ†é€‰æ‹©å™¨ç²¾ç¡®å®šä½ã€‚
* **é«˜æ•ˆäº¤äº’**ï¼š
  * **å…¨å±€å¿«æ·é”®**ï¼šé»˜è®¤ `Cmd + E` éšæ—¶å¼€å§‹/æš‚åœï¼ˆæ”¯æŒè‡ªå®šä¹‰ï¼‰ã€‚
  * **è‡ªåŠ¨æµç¨‹**ï¼šä¸“æ³¨ç»“æŸè‡ªåŠ¨è¿›å…¥ä¼‘æ¯æ¨¡å¼ï¼Œä¼‘æ¯ç»“æŸè‡ªåŠ¨å›žåˆ°å¾…æœºã€‚
* **æ•°æ®å®‰å…¨**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼ˆ`~/Documents/flowclone_history.json`ï¼‰ï¼Œæ— éœ€è”ç½‘ï¼Œå®‰å…¨å¯é ã€‚

### ðŸ“¥ å®‰è£…ä¸Žä½¿ç”¨

#### ç›´æŽ¥å®‰è£…

1.  ä¸‹è½½æœ¬é¡¹ç›® Release ä¸­çš„ **`MyClock.dmg`** æ–‡ä»¶ã€‚
2.  åŒå‡»æ‰“å¼€ `.dmg`ï¼Œå°† **MyClock** å›¾æ ‡æ‹–å…¥ **Applications (åº”ç”¨ç¨‹åº)** æ–‡ä»¶å¤¹ã€‚
3.  åŒå‡»å¯åŠ¨åº”ç”¨ï¼ˆæ­¤æ—¶ç³»ç»Ÿå¯èƒ½ä¼šæç¤ºâ€œæ— æ³•æ‰“å¼€â€æˆ–â€œèº«ä»½ä¸æ˜Žçš„å¼€å‘è€…â€ï¼Œè¯·ç‚¹å‡»â€œå®Œæˆâ€å…³é—­å¼¹çª—ï¼‰ã€‚
4.  **âš ï¸ é¦–æ¬¡æŽˆæƒæ­¥éª¤**ï¼š
    * æ‰“å¼€ Mac çš„ **ç³»ç»Ÿè®¾ç½® (System Settings)**ã€‚
    * è¿›å…¥ **éšç§ä¸Žå®‰å…¨æ€§ (Privacy & Security)**ã€‚
    * å‘ä¸‹æ»‘åŠ¨é¡µé¢è‡³â€œå®‰å…¨æ€§â€åŒºåŸŸã€‚
    * ä½ ä¼šçœ‹åˆ°ä¸€æ¡æç¤ºï¼šâ€œå·²é˜»æ­¢ä½¿ç”¨â€˜MyClockâ€™ï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜Žçš„å¼€å‘è€…â€ã€‚
    * ç‚¹å‡»å³ä¾§çš„ **â€œä»è¦æ‰“å¼€â€ (Open Anyway)** æŒ‰é’®ã€‚
    * åœ¨å¼¹å‡ºçš„ç¡®è®¤æ¡†ä¸­è¾“å…¥å¯†ç æˆ–æŒ‡çº¹ï¼Œå¹¶ç‚¹å‡» **â€œæ‰“å¼€â€**ã€‚
    * ä»¥åŽå³å¯ç›´æŽ¥åŒå‡»æ­£å¸¸ä½¿ç”¨ã€‚

#### ä½¿ç”¨æŒ‡å—

* ç‚¹å‡»èœå•æ çš„å°å›¾æ ‡ï¼ˆé—¹é’Ÿ/å’–å•¡æ¯ï¼‰å³å¯å”¤å‡ºä¸»ç•Œé¢ã€‚
* **å¼€å§‹/æš‚åœ**ï¼šç‚¹å‡»æ’­æ”¾æŒ‰é’®æˆ–æŒ‰ä¸‹å…¨å±€å¿«æ·é”®ã€‚
* **è®¾ç½®**ï¼šç‚¹å‡»ç•Œé¢å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡ï¼Œå¯è®¾ç½®â€œå¼€æœºè‡ªå¯â€ã€â€œå¿«æ·é”®â€ã€â€œé»˜è®¤æ—¶é•¿â€åŠâ€œæç¤ºéŸ³æ•ˆâ€ã€‚
* **æ³¨æ„**ï¼šè®¾ç½®äº†æœªè¶…è¿‡5minçš„ä¸“æ³¨ä¸è®¡å…¥æ€»æ—¶é•¿

### ðŸ“‚ æ–‡ä»¶ç»“æž„è¯´æ˜Ž

å¦‚æžœæ‚¨æ˜¯å¼€å‘è€…ï¼Œä»¥ä¸‹æ˜¯æºä»£ç æ ¸å¿ƒæ–‡ä»¶çš„ä½œç”¨è¯´æ˜Žï¼š

| æ–‡ä»¶å                     | ä½œç”¨æè¿°                                                     |
| :------------------------- | :----------------------------------------------------------- |
| **MyClockApp.swift**       | **ç¨‹åºå…¥å£**ã€‚è´Ÿè´£ç®¡ç† `AppDelegate`ï¼Œåˆå§‹åŒ–èœå•æ å›¾æ ‡ï¼ˆStatus Bar Itemï¼‰å’Œå¼¹çª—ï¼ˆPopoverï¼‰ï¼Œå¤„ç†åº”ç”¨å¯åŠ¨å’Œé€€å‡ºé€»è¾‘ã€‚ |
| **TimerManager.swift**     | **æ ¸å¿ƒé€»è¾‘å¤§è„‘**ã€‚ç®¡ç†è®¡æ—¶å™¨çŠ¶æ€ã€å€’è®¡æ—¶é€»è¾‘ã€æ•°æ®æ¨¡åž‹å®šä¹‰ (`SessionRecord`) ä»¥åŠæ•°æ®çš„æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ (JSONè¯»å†™)ã€‚ |
| **ControlsView.swift**     | **ä¸»æŽ§ç•Œé¢**ã€‚åŒ…å«å€’è®¡æ—¶å¤§æ•°å­—æ˜¾ç¤ºã€è‡ªå®šä¹‰æ»‘å— (MinimalSlider) ä»¥åŠ æ’­æ”¾/æš‚åœ/è·³è¿‡/é‡ç½® æŒ‰é’®ç»„ã€‚ |
| **StatsView.swift**        | **ç»Ÿè®¡ç•Œé¢**ã€‚åŒ…å« Day/Week/Month ä¸‰ç§è§†å›¾çš„åˆ‡æ¢é€»è¾‘ã€æ—¥åŽ†å¯¼èˆªç³»ç»Ÿä»¥åŠçƒ­åŠ›å›¾çš„æ¸²æŸ“é€»è¾‘ã€‚ |
| **SettingsView.swift**     | **è®¾ç½®ç•Œé¢**ã€‚ç®¡ç†ç”¨æˆ·åå¥½è®¾ç½®ï¼ˆå¦‚å¼€æœºè‡ªå¯ã€æ—¶é•¿è®¾ç½®ï¼‰ï¼Œä½¿ç”¨ `AppStorage` å­˜å‚¨é…ç½®ã€‚ |
| **CustomComponents.swift** | **UI ç»„ä»¶åº“**ã€‚åŒ…å«è‡ªå®šä¹‰çš„æ»‘å— (å¸¦è§¦æ„Ÿåé¦ˆ)ã€åˆ†æ®µæŽ§åˆ¶å™¨ (Segmented Control)ã€æ­¥è¿›å™¨ (Stepper) ä»¥åŠå¿«æ·é”®å½•åˆ¶å™¨ã€‚ |
| **GlobalHotKey.swift**     | **åº•å±‚å·¥å…·ç±»**ã€‚ä½¿ç”¨ macOS Carbon API å®žçŽ°å…¨å±€é”®ç›˜äº‹ä»¶ç›‘å¬ï¼Œæ”¯æŒåŽå°è§¦å‘å¿«æ·é”®ã€‚ |

### ðŸ”¨ æœ¬åœ°æž„å»º

1.  ç¡®ä¿å®‰è£…äº† Xcode 14.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
2.  æ‰“å¼€ `MyClock.xcodeproj`ã€‚
3.  ç­‰å¾… Swift Package ä¾èµ–è§£æžå®Œæˆï¼ˆæœ¬é¡¹ç›®æ— ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œçº¯åŽŸç”Ÿï¼‰ã€‚
4.  *(å¯é€‰)* è‹¥è¦ä¿®æ”¹ Dock æ˜¾ç¤ºè¡Œä¸ºï¼Œè¯·åœ¨ `Info.plist` ä¸­è°ƒæ•´ `Application is agent (UIElement)`ã€‚
5.  æŒ‰ä¸‹ `Cmd + R` è¿è¡Œï¼Œæˆ–é€‰æ‹© Product -> Archive è¿›è¡Œæ‰“åŒ…ã€‚

---

<a id="english-version"></a>

âš ï¸ **Disclaimer:**
 This project was built entirely by **Gemini** within **2 hours**, including the code, export, README, and logo. The initial UI style and basic features were inspired by the Xiaohongshu creator **â€œå¡å¤«å¡â€** (ID: **174973146**).

## ðŸ‡ºðŸ‡¸ English Version

**MyClock** is a minimalist Pomodoro timer designed specifically for macOS. Living in your menu bar, it offers a silky-smooth native experience, powerful statistics, and full customization to help you stay focused and track your productivity.

### âœ¨ Key Features

* **Native Experience**: Built with SwiftUI and AppKit, perfectly blending with macOS design language (Dark Mode supported).
* **Distraction-Free Design**:
  * **Dock-less**: Runs as an Agent App (`LSUIElement`), living exclusively in the menu bar without cluttering your Dock.
  * **Status Bar Info**: Icon and countdown timer are always visible at the top of your screen.
* **Minimalist Control**:
  * Drag the slider to quickly set focus duration (1-90 mins).
  * Slider interactions include Haptic Feedback.
  * "Skip" functionality that records actual focus time automatically.
* **Visual Statistics**:
  * **Day View**: Detailed timeline list of your sessions.
  * **Week View**: Dynamic bar chart for weekly overview.
  * **Month View**: GitHub-style Heatmap with interactive date selection.
  * **Calendar Navigation**: Switch dates/weeks/months easily or jump to a specific date via the calendar picker.
* **Efficiency First**:
  * **Global Shortcut**: Start/Pause anytime with `Cmd + E` (customizable).
  * **Auto Flow**: Automatically starts a break after focus, and resets after the break.
* **Data Privacy**: All data is stored locally (`~/Documents/flowclone_history.json`). No internet connection required.

### ðŸ“¥ Installation & Usage

#### Install via DMG

1.  Download the **`MyClock.dmg`** file from the Releases section.
2.  Open the `.dmg` and drag the **MyClock** app into your **Applications** folder.
3.  Double-click to launch (close the warning dialog if it says it cannot be opened).
4.  **âš ï¸ Granting Permission (First Launch Only)**:
    * Open **System Settings** -> **Privacy & Security**.
    * Scroll down to the "Security" section.
    * Look for a message saying "MyClock was blocked because it is not from an identified developer".
    * Click the **"Open Anyway"** button.
    * Confirm by entering your password or Touch ID and clicking **"Open"**.
    * Subsequent launches can be done normally.

#### User Guide

* Click the menu bar icon (Timer/Coffee Cup) to open the main window.
* **Start/Pause**: Click the play button or use the global hotkey.
* **Settings**: Click the gear icon to configure "Launch at Login", "Global Shortcuts", "Default Durations", and "Sound Effects".
* **Note**: Focus sessions shorter than 5 minutes are not counted toward the total duration.

### ðŸ“‚ File Structure Explained

For developers, here is an overview of the source code structure:

| File Name                  | Description                                                  |
| :------------------------- | :----------------------------------------------------------- |
| **MyClockApp.swift**       | **App Entry Point**. Manages the `AppDelegate`, initializes the Menu Bar Item and Popover window, and handles app lifecycle. |
| **TimerManager.swift**     | **Core Logic**. Handles timer state, countdown logic, data models (`SessionRecord`), and local data persistence (JSON I/O). |
| **ControlsView.swift**     | **Main Interface**. Contains the countdown display, custom slider (MinimalSlider), and playback controls (Play/Pause/Skip/Reset). |
| **StatsView.swift**        | **Statistics Interface**. Manages the logic for Day/Week/Month views, calendar navigation, and heatmap rendering. |
| **SettingsView.swift**     | **Settings Interface**. Manages user preferences using `AppStorage`. |
| **CustomComponents.swift** | **UI Components**. Contains custom-built UI elements like the Haptic Slider, Segmented Control, Stepper, and Shortcut Recorder. |
| **GlobalHotKey.swift**     | **Utility Class**. Implements global keyboard shortcut monitoring using the macOS Carbon API. |

### ðŸ”¨ Build from Source

1.  Ensure you have Xcode 14.0 or later installed.
2.  Open `MyClock.xcodeproj`.
3.  Wait for indexing (No 3rd-party dependencies required).
4.  Press `Cmd + R` to run, or select Product -> Archive to build a release version.

---

Â© 2025 MyClock Project.
